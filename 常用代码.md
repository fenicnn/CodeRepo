[toc]

## IDEA

```bash
# Debug
  F7 # 下一步(进入)
  F8 # 下一步(不进入)
# 创建新类
	command+1 # 进入project
	command+n # 新建类 
command+shift+t # 创建单元测试
command+, # 打开整个IDEA属性配置对话框
command+; # 打开项目属性配置对话框
command+G # 快速定位到某一行某一列
shift+enter # 开始新的行
command+shift+U # 选中的单词或代码，切换大小写
command+alt+shift+G # 生成数据库表的DDL语句
command+b # 进入到函数
command+alt+b # 跳过接口进入实现
command+shift+f # 全项目查找关键字
command+o # 查询对应的类
alt+r # 跑起来
两下shift # 搜索功能
command+alt+l # 代码格式化
comand+alt+shift+o 查询最近打开的项目
```

## fct

```bash
# 提交review
fct push [-b <branch>] [-r <reviewers>] [-s(kip-tests)] [-f(astest)]
# clone
fct clone <服务>
# 本地运行,支持启动多服务
fct run test,rz-test --local
```

## Nginx

```bash
# nginx 路径
 /usr/local/etc/nginx/ 
# 开启nginx
start nginx
# 快速停止nginx
nginx -s stop
# 完整有序的停止nginx
nginx -s quit
# 验证你的修改有没有问题，可以检查错误
sudo nginx -t
# 重启Nginx
sudo nginx -s reload
# 查看日志
/var/log/nginx
```

## Vim

##### 撤销与重做

```bash
u # 撤销
ctr + r # 重做 
. # 重复上一个动作
```

##### 设置行号

```bash
:set nu
```

##### 光标移动

```bash
G # 移到文末
gg # 相当于1G,移到第一行，移到第n行为nG
ctr + u # 向上移动半页
ctr + d # 向下移动半页
ctr + f # 向前翻一页
ctr + b # 向后翻一页
0 # 移动到行首
$ # 移动到行末
H # 移动到屏幕最上方
M # 移动到屏幕中间
L # 移动到屏幕最下方
```

##### 搜索与替换

```bash
/search # 向上搜索
?search # 向下搜索
n # 下一个
:1,$s/from/to/gc # 全文搜索from替换成to
:n1,n2s/from/to/gc # 第n1行到n2行之间的from替换成to
```

##### 删除、复制与黏贴

```bash
x, X # 向后删除，向前删除一个字符
nx # 删除n个字符
dd # 删除整行
ndd # 删除向下的n行
d1G # 删除第1行到当前行
dG # 删除当前行到最后一行
d$ # 删除光标到行末
d0 # 删除光标前到行首
yy # 复制，各种用法参考dd，基本是一样的
p,P #黏贴在下一行，黏贴在上一行
J # 与下一行合为一行
```

## Lombok

```java
@Data ： 注在类上，提供类的get、set、equals、hashCode、canEqual、toString方法
@AllArgsConstructor ： 注在类上，提供类的全参构造
@NoArgsConstructor ： 注在类上，提供类的无参构造
@Setter ： 注在属性上，提供 set 方法
@Getter ： 注在属性上，提供 get 方法
@EqualsAndHashCode ： 注在类上，提供对应的 equals 和 hashCode 方法
@Log4j/@Slf4j ： 注在类上，提供对应的 Logger 对象，变量名为 log
```

## 控制台命令

##### grep+正则，获取指定匹配项

```bash
grep '@@@AlimqClassroomUpdateMessageConsumer@@@ consumer start:' conan-kid-timeslot.log.2020-09-24 | grep -P "classroomLogId=[0-9]*" -o
```

##### 查询RPC接口调用关系

```bash
#!/bin/bash
project=$1
ssh "conan@lf-${project}3-online" "grep xxx /home/shared/log/rpc-request-${project}.log* | cut -f 3 | cut -f 2 -d '=' | sort | uniq" | while read ip; do 
	curl "http://dns.zhenguanyu.com/q?ip=${ip%$'\r'}" 
done
```

##### curl命令发送post请求

```bash
curl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' -d '[18019]' 'http://localhost:8080/conan-rock-interview/api/task/send-interview-activity-created-message?dryRun=true'
```

##### 抽取关键日志到临时文件中

```bash
grep "consumer end: message=" conan-oral-class.* > classroom-update-message-redundent.log
```

##### 从服务器上拉取日志文件到本地

```bash
mupload -f 

scp conan@lf-conan-oral-class2-online:/home/shared/log/classroom-update-message-redundent.log /Users/nnchenit/Downloads/
```

##### 控制台快捷键

```bash
Ctrl + w # 删除一个单词
Ctrl + u # 删除光标之前到行首的字符
Ctrl + k # 删除光标之前到行尾的字符
Ctrl + a # 跳到行首
Ctrl + e # 跳到行末
Ctrl + d # delete
Ctrl + r # 显示：号提示，根据用户输入查找相关历史命令（reverse-i-search）
Ctrl + y # 粘贴最后一次被删除的单词
Command + T # 分裂出新的bash
Command + shift + { 或 } # 向左/向右切换标签
```

##### 文本搜索

```bash
grep -n '2019-10-24 00:01:11' *.log # 查看对应日志的行号
grep –e "正则表达式" 文件名
grep –i "被查找的字符串" 文件名 # 查找时不区分大小写
grep -c "被查找的字符串" 文件名 # 查找匹配的行数
grep -w here file # 全字完整匹配的
grep –v "被查找的字符串" 文件名 # 查找不匹配指定字符串的行
grep -f test file # 以test文件中的每一行作为模式匹配file
选项-A N、-B N、-C N表示输出匹配行和其'周围行'
# 从当前目录开始查找所有扩展名为 .in 的文本文件，并找出包含 "thermcontact" 的行：
find . -name "*.in" | xargs grep "thermcontact" 
```

##### 其他

```bash
sudo spctl --master-disable # 应用授权
ps -p # 查看进程
```

## Mysql语句

##### 命令行登录

```bash
# 启动msyql
mysql.server start
# 停止msyql
mysql.server stop
# 重启mysql
mysql.server restart

# 登录mysql
mysql -hmysql-conan-test-writer -uconan -pconan123  

如何登陆线上数据库:
1 登陆跳板机
2 登陆机器 ssh ape@dx-ape-others1-vm， 没权限的记得申请权限，申请方式和申请其他线上服务权限一样，服务名称填ape-others
3 读库输入mr conan_rock_ot， 写库输入mw conan_rock_ot
4 执行相应的sql语句。
```

##### 常见控制台语句

```mysql
# 数据库
create database name; # 创建数据库
use databasename; # 选择数据库
drop database name; # 直接删除数据库
show create table name; # 查看DDL语句	
select version(), current_date; # 显示当前mysql版本和当前日期

# 表
show tables; # 显示表
describe tablename; # 表的详细描述
```

##### substring_index的用法

```sql
select *
from(
  select substring_index(substring_index(operation, ':', -1), "}", 1) as classroomLogId
  from main_activity
  where operation_type = 21
) as classroomLog
group by classroomLogId
having count(classroomLogId) > 1
```

##### Case when 

```sql
select ts, 
			sum(messageCount) as messageCountTotal,
			sum(case when userType = 0 then messageCount else 0 end) as messageCountTeacher, 		  			sum(case when userType = 1 then messageCount else 0 end) as messageCountStudent
from nb_amaze_live_message_monitor_chennannan
group by ts;
```

##### From_unixtime

```sql
select *,from_unixtime(createdTime/1000) , from_unixtime(startTime/1000) 
from interview 
where createdTime < 1590403200000 
			and startTime > 1590940800000;
```

## Git常见命令

##### 撤销提交

```bash
git reset --soft HEAD^ 撤销一次提交
# 撤销一次git commit --amend
	git reflog
	git reset --soft HEAD@{x} 撤销--amend提交

git clean -df # 删除未跟踪的
git reset --hard # 删除已跟踪的
```

##### 提交分支

```bash
git push origin HEAD:refs/for/chennannan # 提交到指定远程分支,可以通过”.git/config“文件查看具体写法
push origin -f HEAD:deploy-test # 覆盖远程分支
```

##### 查看分支

```bash
git branch # 查看本地分支
git branch -a # 查看所有分支
```

## Java

##### 常见语法

```java
Collections.emptyList();
CollectionUtils.isEmpty();
```

##### 文件读写

```java
BufferedReader in = new BufferedReader(new FileReader("sensitive-word.csv"));
String str;
while ((str = in.readLine()) != null) {
  if(!SensitiveWordUtils.containsSensitiveWord(str)){
    System.out.println(String.format("Wrong: [%s]", str));
  }
}
```

##### 读取Json文件

```java
import org.apache.commons.io.FileUtils;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fenbi.common.util.JsonUtils;

File file = new File("phones.json");
String content = FileUtils.readFileToString(file, "UTF-8");
List<Phone> phones = JsonUtils.readValue(content, new TypeReference<List<Phone>>(){});
```

