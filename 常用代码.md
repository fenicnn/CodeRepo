[toc]

## fct

```bash
# 提交review
fct push [-b <branch>] [-r <reviewers>] [-s(kip-tests)] [-f(astest)]
# clone
fct clone <服务>
# 运行
fct run test,rz-test --local
```

## Nginx

```bash
# nginx 路径
 /usr/local/etc/nginx/ 
# 开启nginx
start nginx
# 快速停止nginx
nginx -s stop
# 完整有序的停止nginx
nginx -s quit
# 验证你的修改有没有问题，可以检查错误
sudo nginx -t
# 重启Nginx
sudo nginx -s reload
# 查看日志
/var/log/nginx
```

## Vim

##### 撤销与重做

```bash
u # 撤销
ctr + r # 重做 
. # 重复上一个动作
```

##### 设置行号

```bash
:set nu
```

##### 光标移动

```bash
G # 移到文末
gg # 相当于1G,移到第一行，移到第n行为nG
ctr + u # 向上移动半页
ctr + d # 向下移动半页
ctr + f # 向前翻一页
ctr + b # 向后翻一页
0 # 移动到行首
$ # 移动到行末
H # 移动到屏幕最上方
M # 移动到屏幕中间
L # 移动到屏幕最下方
```

##### 搜索与替换

```bash
/search # 向上搜索
?search # 向下搜索
n # 下一个
:1,$s/from/to/gc # 全文搜索from替换成to
:n1,n2s/from/to/gc # 第n1行到n2行之间的from替换成to
```

##### 删除、复制与黏贴

```bash
x, X # 向后删除，向前删除一个字符
nx # 删除n个字符
dd # 删除整行
ndd # 删除向下的n行
d1G # 删除第1行到当前行
dG # 删除当前行到最后一行
d$ # 删除光标到行末
d0 # 删除光标前到行首
yy # 复制，各种用法参考dd，基本是一样的
p,P #黏贴在下一行，黏贴在上一行
J # 与下一行合为一行
```

## Lombok

```java
@Data ： 注在类上，提供类的get、set、equals、hashCode、canEqual、toString方法
@AllArgsConstructor ： 注在类上，提供类的全参构造
@NoArgsConstructor ： 注在类上，提供类的无参构造
@Setter ： 注在属性上，提供 set 方法
@Getter ： 注在属性上，提供 get 方法
@EqualsAndHashCode ： 注在类上，提供对应的 equals 和 hashCode 方法
@Log4j/@Slf4j ： 注在类上，提供对应的 Logger 对象，变量名为 log
```

## 控制台命令

##### 查询RPC接口调用关系

```bash
#!/bin/bash

project=$1

ssh "conan@lf-${project}3-online" "grep xxx /home/shared/log/rpc-request-${project}.log* | cut -f 3 | cut -f 2 -d '=' | sort | uniq" | while read ip; do 
	curl "http://dns.zhenguanyu.com/q?ip=${ip%$'\r'}" 
	
done
```

##### curl命令发送post请求

```bash
curl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' -d '[18019]' 'http://localhost:8080/conan-rock-interview/api/task/send-interview-activity-created-message?dryRun=true'
```

##### 抽取关键日志到临时文件中

```bash
grep "consumer end: message=" conan-oral-class.* > classroom-update-message-redundent.log
```

##### 从服务器上拉取日志文件到本地

```bash
mupload -f 

scp conan@lf-conan-oral-class2-online:/home/shared/log/classroom-update-message-redundent.log /Users/nnchenit/Downloads/
```

##### 控制台快捷键

```bash
Ctrl + w # 删除一个单词
Ctrl + u # 删除光标之前到行首的字符
Ctrl + k # 删除光标之前到行尾的字符
Ctrl + a # 跳到行首
Ctrl + e # 跳到行末
Ctrl + d # delete
Ctrl + r # 显示：号提示，根据用户输入查找相关历史命令（reverse-i-search）
Ctrl + y # 粘贴最后一次被删除的单词
Command + T # 分裂出新的bash
Command + shift + { 或 } # 向左/向右切换标签
```

##### 文本搜索

```bash
grep -n '2019-10-24 00:01:11' *.log # 查看对应日志的行号
grep –e "正则表达式" 文件名
grep –i "被查找的字符串" 文件名 # 查找时不区分大小写
grep -c "被查找的字符串" 文件名 # 查找匹配的行数
grep -w here file # 全字完整匹配的
grep –v "被查找的字符串" 文件名 # 查找不匹配指定字符串的行
grep -f test file # 以test文件中的每一行作为模式匹配file
选项-A N、-B N、-C N表示输出匹配行和其'周围行'
# 从当前目录开始查找所有扩展名为 .in 的文本文件，并找出包含 "thermcontact" 的行：
find . -name "*.in" | xargs grep "thermcontact" 
```

##### 其他

```bash
sudo spctl --master-disable # 应用授权
ps -p # 查看进程
```

## Mysql语句

##### substring_index的用法

```sql
select
  *
from
  (
    select
      substring_index(substring_index(operation, ':', -1), "}", 1) as classroomLogId
    from
      main_activity
    where
      operation_type = 21
  ) as classroomLog
group by
  classroomLogId
having
  count(classroomLogId) > 1
```

##### 命令行登录

```bash
# 启动msyql
mysql.server start
# 停止msyql
mysql.server stop
# 重启mysql
mysql.server restart

# 登录mysql
mysql -hmysql-conan-test-writer -uconan -pconan123  


如何登陆线上数据库:
1 登陆跳板机
2 登陆机器 ssh ape@dx-ape-others1-vm， 没权限的记得申请权限，申请方式和申请其他线上服务权限一样，服务名称填ape-others
3 读库输入mr conan_rock_ot， 写库输入mw conan_rock_ot
4 执行相应的sql语句。
```

##### 常见控制台语句

```mysql
# 数据库
create database name; # 创建数据库
use databasename; # 选择数据库
drop database name; # 直接删除数据库
show create table name; # 查看DDL语句	
select version(), current_date; # 显示当前mysql版本和当前日期

# 表
show tables; # 显示表
describe tablename; # 表的详细描述

```

## Git常见命令

##### 撤销提交

```bash
git reset --soft HEAD^ 撤销一次提交
git clean -df # 删除未跟踪的
git reset --hard # 删除已跟踪的
```

##### 提交分支

```bash
git push origin HEAD:refs/for/chennannan
```

## Java

##### 常见语法

```java
Collections.emptyList();
CollectionUtils.isEmpty();
```

##### 文件读写

```java
BufferedReader in = new BufferedReader(new FileReader("sensitive-word.csv"));
String str;
while ((str = in.readLine()) != null) {
  if(!SensitiveWordUtils.containsSensitiveWord(str)){
    System.out.println(String.format("Wrong: [%s]", str));
  }
}
```

## homebrew换清华源

```bash
# brew 程序本身，Homebrew/Linuxbrew 相同
git -C "$(brew --repo)" remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git

# 以下针对 mac OS 系统上的 Homebrew
git -C "$(brew --repo homebrew/core)" remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git
git -C "$(brew --repo homebrew/cask)" remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask.git
git -C "$(brew --repo homebrew/cask-fonts)" remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-fonts.git
git -C "$(brew --repo homebrew/cask-drivers)" remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-cask-drivers.git

# 以下针对 Linux 系统上的 Linuxbrew
git -C "$(brew --repo homebrew/core)" remote set-url origin https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/linuxbrew-core.git

# 更换后测试工作是否正常
brew update
```
